#!/usr/bin/env ruby
require 'dotenv'
Dotenv.load('.env', '.env.local')

if ARGV.count != 1
  puts "usage: 'create_production server_name'"
  exit(1)
end

puts "creating production server"
%x(docker-machine create --driver digitalocean --digitalocean-access-token #{ENV['DIGITALOCEAN_TOKEN']} --digitalocean-size "s-4vcpu-8gb" #{ARGV[0]})
server_ip = %x(docker-machine inspect --format='{{.Driver.IPAddress}}' #{ARGV[0]})
puts "new server address: #{server_ip}"
